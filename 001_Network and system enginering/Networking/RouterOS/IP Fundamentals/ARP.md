---
Category: Information
tags:
  - information
  - open
---
---
###### External links
- 
---
## Description
`/ip arp`

В конечном итоге адресация проходит на даталинке, то есть устройствам нужно знать физ адрес. Для этого существует *протокол определения адреса*.

---
## ARP
 Каждое по идее сетевое устройство имеет таблицу арп-таблицу, которая заполняется динамически, но при этом для стабильности или сисурности немного можно заполнять статическими записями.

*Для айпивэ6 арп остался в прошлом.*

Ну по базе, когда устройство хочет отправить дату на айпи, он сначала смотрит в свой арп-кеш, если записи такой нет то он посылает бродкаст реквест меседж на lan, и девайс который увидел свой адрес, кидает арп ответ ему со своим маком.

*У микрота можно глянуть арп-таблицу и что-то добавить статическое просто в этом разделе.*

- если адрес находится в другой сети и есть шлюз у него в настройках, то он отправит запрос на айпи шлюза и в записи для искаемого айпи, просто укажет мак порта шлюза, а шлюз будет разбираться
- *как я понял, то роутер как свитч будет работать только если одна подсеть и hw-offload, я не знаю, надо разбираться*

---
### Arp Models
По дефолту в роутерОС стоит энаблед, и модель выбирается конкретно ***в настройках интерфейса***.

*Желательно арп-мод выбирать конкретно для интерфейса, на котором сидит айпиадрес, потому что арп конкретно на таком интерфейсе и работает, а интерфейсы могут быть логическими и вложенными.*


- #### Enabled
	Все новые записи добавляются автоматически и роутер отвечает на запросы, и сам кидает запросы.

- #### Disabled
	Если параметр такой, то все запросы клиентов к роутеру будут проигнорированы, да и сам роутер не будет запрашивать ничего, поэтому записи можно добавить статически по типу:
```bash
/ip arp add mac-address=08:00:27:3C:79:3A address=10.155.101.217 interface=ether1
```

- #### Reply only
	Получается использует статические записи у себя и отправляет ответы на запросы, сам не посылает запросы.
	
	Пример выставления режима арп:
```bash
/ip interface bridge set bridge1 arp=reply-only
```

- #### Proxy ARP
	Получается, если у хоста нет шлюза, и дест. адрес в другой подсети, то он отправит арп-запрос на дест. адрес, и получается когда роутер его увидит то ничего не даст *(ну только если этот адрес другой подсети по идее на его интерфейсе - тогда отдаст ответ)*, но когда этот режим включён - то он будет как раз отвечать своим маком порта на такой запрос (но только если знает куда маршрутить).

- #### Local proxy ARP
	Так же как прокси, но только если запрашиваемая подсеть находится на том же интерфейсе. 
	*Шото там это сделано для поддержания одной штуки в свитчах.*


---
## Notes


---




